# MapSocket
Request-response mapped WebSocket implementation.

**Don't use this library in production code! It is only intended as a coding challenge and is therefore not complete, nor properly tested!**

## User manual
*coming soon...*

## Requirements
The project must fulfil the following requirements:
* implementation of a Node.JS library that provides request-response mapping on top of WebSockets
* implementation of a Vue (or React) -based UI project that showcases the implemented library in use

There are two additional constraints for the task:
* use the [ws](https://github.com/websockets/ws) library on the server-side
* no additional external dependencies are allowed, except those necessary for building / testing

## Scope
First of all, the requirements have to be broken down into smaller units of work.
After analysis, the following individual tasks have been identified:

* implementation of the MapSocket Node.JS library
    * server logic
    * client logic
* implementation of an example project that uses MapSocket on the server-side
* implementation of an example project that uses MapSocket on the client-side
* write documentation and user-manual

### MapSocket library
The two main features that the library offers are the `MapSocketServer` and the `MapSocketClient`. 

The server allows the user to open a socket listening for requests from the subscribed client(s) and respond to them.
Users can define custom handler methods that specify how different requests must be resolved. 

The syntax for defining request handler methods looks as follows:

```ts
ms.on('sum', (params) => {
    return params.x + params.y
})
```

Where `sum` is the name of the procedure, and the `params` are the parameters sent by the client.

The client on the other hand is able to subscribe to an endpoint, send requests to it with predefined parameters, and receive the response.
To map requests to responses, a unique request ID is necessary. This is generated by the client and is sent with each request to the server.

The client syntax for dispatching requests:

```ts
mc.invoke('sum', [1, 2]).then(result => {
    console.log(result);
})
```

### Server demo
The example server implementation imports the `mapsocket` library as if it was an external dependency published in the `npm` registry. 

It creates a new `MapSocketServer` and defines some simple handler methods, like the one above.

### Client demo
The example client implementation, similarly to the server implementation, imports the `mapsocket` library and uses the `MapSocketClient` to
connect to the previously created socket. 

The UI is built with React, and showcases the advantages the `mapsocket` library gives over just simply using `WebSockets`. 
In this example, the client dispatches numerous requests simultaneously, to which a procedure is implemented by the server that introduces a
random delay before sending back a response. This random delay is supposed to simulate an "expensive" calculation / process that takes a 
while to complete in a real-world scenario. After receiving the responses, the UI displays the result by matching the dispatched request 
parameters with their respective responses.


## Effort estimation
Estimated workload in hours for each identified task in the scope.

| Task                              | Issue                                             | Estimate in hours |
|-----------------------------------|---------------------------------------------------|-------------------|
| `mapsocket` server implementation | [#1](https://github.com/wlchs/mapsocket/issues/1) | 4                 |
| `mapsocket` client implementation | [#2](https://github.com/wlchs/mapsocket/issues/2) | 2                 |
| server demo implementation        | [#3](https://github.com/wlchs/mapsocket/issues/3) | 1                 |
| client demo implementation        | [#4](https://github.com/wlchs/mapsocket/issues/4) | 3                 |
| documentation and user manual     | [#5](https://github.com/wlchs/mapsocket/issues/5) | 2                 |

More information about the individual tasks can be found under their respective GitHub issues.